---
interface Props {
  videoUrl: string;
  title: string;
}

const videoSources = {
  1080: "video-1080p.mp4",
  720: "video-720p.mp4",
  480: "video-480p.mp4",
};
---
<div class="relative w-full aspect-video bg-black">
  <video class="w-full h-full" controls preload="metadata" title={title}>
    <source src={videoUrl} type="video/mp4" />
    Your browser does not support the video tag.
  </video>

  <!-- Quality Selector -->
  <div class="absolute bottom-16 right-4 bg-black/90 rounded-md">
    {Object.entries(videoSources).map(([quality, url]) => (
      <button
        key={quality}
        class="px-4 py-2 text-sm hover:bg-accent w-full text-left"
        onClick={() => {
          document.querySelector('video source').setAttribute('src', url);
          document.querySelector('video').load();
        }}
      >
        {quality}p
      </button>
    ))}
  </div>
</div>
